# 堡垒机



是阿里云提供的运维和安全审计管控平台。

简单来说，堡垒机可以接入阿里云的ECS、数据库、应用（windows），也可以接入其他云的服务，做到统一管理。



## 创建堡垒机



![image-20251230000557822](./堡垒机.assets/image-20251230000557822.png)



# 资产管理



## 接入主机

（基本是虚拟机）

![image-20251230000732130](./堡垒机.assets/image-20251230000732130.png)



点击新建主机账户，可以把虚拟机里本来就有的用户导入。堡垒机不会给VM创建用户。

> 请确认主机或ECS实例上已经创建了对应的操作系统账户，堡垒机不会将主机账户同步到主机或ECS实例，SFTP运维使用SSH协议账户。



![image-20251230000914189](./堡垒机.assets/image-20251230000914189.png)





## 接入数据库

可以接入RDS、PolarDB或第三方数据库。我这里接入我在腾讯云VM里docker自建的postgresql和MySQL。

> 和前面同理，新建数据库账户就是把数据库原本就有的账号导入进来。我这里导入的是分别是postgres和root用户。

![image-20251230001132337](./堡垒机.assets/image-20251230001132337.png)





## 应用

这里的应用我觉得应该是windows的VM。因为新建应用需要选中应用服务器和远程客户端。应用服务器就是Windows资产。



![image-20251230001414049](./堡垒机.assets/image-20251230001414049.png)





![image-20251230001453533](./堡垒机.assets/image-20251230001453533.png)







![image-20251230001527047](./堡垒机.assets/image-20251230001527047.png)





![image-20251230001607603](./堡垒机.assets/image-20251230001607603.png)



## 资产组

就是主机、数据库、应用的集合。



![image-20251230001629561](./堡垒机.assets/image-20251230001629561.png)







## 运维任务管理

就是脚本。和用户运维任务的管理页面。



![image-20251230001712505](./堡垒机.assets/image-20251230001712505.png)





# 人员管理



## 用户

这里的用户是给运维人员用的用户。我作为管理员可以给运维人员分配能管理的资产。



![image-20251230001845281](./堡垒机.assets/image-20251230001845281.png)



比如：我想给这个运维人员一个用ubuntu用户登陆ECS的权限，和用postgres和root分别登陆pgsql和MySQL的权限。

点击授权主机：

![image-20251230002203051](./堡垒机.assets/image-20251230002203051.png)



选择root用户。

![image-20251230002218954](./堡垒机.assets/image-20251230002218954.png)







![image-20251230002247422](./堡垒机.assets/image-20251230002247422.png)



![image-20251230002306323](./堡垒机.assets/image-20251230002306323.png)



数据库同理：

![image-20251230002343889](./堡垒机.assets/image-20251230002343889.png)





此外，我可以把VM和数据库都加到资产组里，这里直接授权资产组就行。



![image-20251230002425972](./堡垒机.assets/image-20251230002425972.png)





完成后，这里有运维门户。

![image-20251230002459537](./堡垒机.assets/image-20251230002459537.png)



use

SUNwenyi/1234



![image-20251230002523596](./堡垒机.assets/image-20251230002523596.png)





登陆成功：

![image-20251230002650170](./堡垒机.assets/image-20251230002650170.png)



用户可以点击这个远程连接到VM。



![image-20251230003112999](./堡垒机.assets/image-20251230003112999.png)



![image-20251230003134901](./堡垒机.assets/image-20251230003134901.png)



数据库同理：

![image-20251230003148492](./堡垒机.assets/image-20251230003148492.png)



运维任务：就是跑脚本



![image-20251230003216304](./堡垒机.assets/image-20251230003216304.png)



![image-20251230003237941](./堡垒机.assets/image-20251230003237941.png)



# 运维审计

## 会话审计

这里的播放，可以看到我用户在VM上的操作。



![image-20251230002736756](./堡垒机.assets/image-20251230002736756.png)



播放：

![image-20251230002839969](./堡垒机.assets/image-20251230002839969.png)





## 实时监控

看到现在的连接。



![image-20251230003005621](./堡垒机.assets/image-20251230003005621.png)











## 操作日志



![image-20251230002953147](./堡垒机.assets/image-20251230002953147.png)

























