# 负载均衡

## ALB(7层)

应用型负载均衡ALB（Application Load Balancer）是阿里云推出的专门面向HTTP、HTTPS和QUIC等应用层负载场景的负载均衡服务，具备超强弹性及大规模应用层流量处理能力

**应用层**

![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0171551671/CAEQUBiBgICkzILklBkiIGI5MjMyZTNmOWM1YjRmODlhNTZkYTFmZWMyZTZmNzk04052370_20231025141545.309.svg)





## NLB（4层）

网络型负载均衡NLB（Network Load Balancer ）是阿里云面向万物互联时代推出的新一代四层负载均衡

![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8139621571/CAEQUBiBgMD9lfXjlBkiIDBjOWUwNDM3YzNjMjQwNTZiZjc2N2FlMDU2Yzg3Yzc14052370_20231025141545.309.svg)









## GWLB（3层）

网关型负载均衡 GWLB（Gateway Load Balancer）是三层负载均衡，通过IP监听可将所有端口的流量分发给后端服务器组中的网络虚拟设备NVA（Network Virtual Appliance），可帮您轻松实现各类网络虚拟设备的高可用部署，例如：防火墙、入侵检测、流量镜像、深度报文检测等。





## CLB

传统型负载均衡CLB（Classic Load Balancer）是将访问流量根据转发策略分发到后端多台云服务器的流量分发控制服务。CLB还具备抗DDoS攻击的能力









ALB（应用型负载均衡）与CLB（传统型负载均衡）的核心区别如下：

### 1. **产品定位**

- ALB：专为七层（HTTP/HTTPS/QUIC）设计，聚焦应用层流量调度，支持高级路由、云原生 Ingress 网关能力

  

- CLB：兼顾四层（TCP/UDP）和基础七层（HTTP/HTTPS），适用于混合协议但对七层功能要求不高的场景

  

### 2. **转发能力**

- ALB：

  - 支持基于 HTTP Header、Cookie、查询字符串、正则表达式等的高级路由；

  - 支持 URL 重写、重定向、限速等；

  - 转发规则

    按用户指定优先级匹配

    

- CLB：

  - 仅支持基于域名或 URL 前缀的简单转发；

  - 域名匹配按“精确 > 小范围通配符 > 大范围通配符”自动排序；

  - URL 路径采用前缀最长匹配

    

### 3. **连接机制与性能**

- 传统型负载均衡CLB和应用型负载均衡ALB在与后端服务器交互时，采用的连接机制不同。

  - **传统型负载均衡CLB**：默认使用HTTP短连接。CLB将请求转发给后端服务器时，会在HTTP头部插入`Connection: close`字段。当后端服务器处理完该请求后，会根据此头部主动发送FIN包断开连接，每次断开连接都会进入TIME-WAIT状态（默认60秒），高并发场景下会快速积累大量TIME-WAIT连接。
  - **应用型负载均衡ALB**：默认支持HTTP长连接（keep-alive）。单个TCP连接可复用处理多个请求，长连接开启情况下会减少连接断开次数，因此减少了TIME-WAIT连接。

  





































